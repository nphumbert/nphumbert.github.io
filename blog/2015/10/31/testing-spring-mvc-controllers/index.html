<!doctype html><html lang=en-US><head><meta charset=utf-8><title>Testing Spring MVC Controllers</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Executive Advisor, Entrepreneur."><meta name=author content="Nadia Zablah Humbert-Labeaumaz"><meta name=generator content="Hugo 0.154.5"><meta property="og:url" content="https://nadiahl.com/blog/2015/10/31/testing-spring-mvc-controllers/"><meta property="og:site_name" content="Nadia Zablah Humbert-Labeaumaz"><meta property="og:title" content="Testing Spring MVC Controllers"><meta property="og:description" content="Since Spring 3.2 (January 2013), it has become possible to test Spring MVC controllers without an external framework. This article demonstrates how to test Spring MVC controllers using only Spring’s built-in testing capabilities."><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2015-10-31T12:54:08+01:00"><meta property="article:modified_time" content="2015-10-31T12:54:08+01:00"><meta property="article:tag" content="Java"><meta property="article:tag" content="Software Testing"><meta property="og:image" content="https://nadiahl.com/images/blog/testing-spring-controllers/header.jpg"><meta property="og:image" content="https://nadiahl.com/images/slider.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nadiahl.com/images/blog/testing-spring-controllers/header.jpg"><meta name=twitter:image content="https://nadiahl.com/images/slider.jpg"><meta name=twitter:title content="Testing Spring MVC Controllers"><meta name=twitter:description content="Since Spring 3.2 (January 2013), it has become possible to test Spring MVC controllers without an external framework. This article demonstrates how to test Spring MVC controllers using only Spring’s built-in testing capabilities."><meta property="twitter:creator" content="@nphumbert"><meta property="twitter:site" content="https://nadiahl.com/"><script async src="https://www.googletagmanager.com/gtag/js?id=G-FDXGPB3FE3"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FDXGPB3FE3")}</script><link rel=stylesheet href=/plugins/bootstrap/css/bootstrap.min.css media=screen><link rel=stylesheet href=/plugins/ionicons/css/ionicons.min.css><link rel=stylesheet href=/plugins/magnific-popup/magnific-popup.min.css><link rel=stylesheet href=/plugins/slick/slick.css><link rel=stylesheet href=/scss/style.min.css media=screen><link rel="shortcut icon" href=/images/favicon.png type=image/x-icon><link rel=icon href=/images/favicon.png type=image/x-icon><link rel=canonical href=https://nadiahl.com/blog/2015/10/31/testing-spring-mvc-controllers/><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Testing Spring MVC Controllers","image":"https:\/\/nadiahl.com\/images\/blog\/testing-spring-controllers\/header.jpg","datePublished":"2015-10-31 12:54:08 \u002b0100 \u002b0100","author":[{"@type":"Person","name":"Nadia Zablah Humbert-Labeaumaz","alternateName":"Nadia Zablah Humbert-Labeaumaz","url":"https:\/\/nadiahl.com\/#about"}]}</script></head><body><div class=preloader></div><header class=navigation><div class=container><div class=row><div class=col-md-12><nav class=navbar><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navigation>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button></div><div class="collapse navbar-collapse" id=navigation><ul class="nav navbar-nav"><li><a href=/>Home</a></li><li><a href=/experience>Experience</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false>Topics <span class=ion-ios-arrow-down style=padding-left:10px></span></a><ul class=dropdown-menu><li><a href=/topics/economics-finance/>Economics & Finance</a></li><li><a href=/topics/high-performing-teams/>High-Performing Teams</a></li><li><a href=/topics/organizational-change/>Organizational Change</a></li><li><a href=/topics/strategic-management/>Strategic Management</a></li><li><a href=/topics/technology-ai/>Technology & AI</a></li></ul></li><li><a href=/research>Research</a></li><li><a href=/essays>Essays</a></li><li><a href=/trainings>Trainings</a></li></ul></div></nav></div></div></div></header><section><div class=container><div class=row><div class=col-lg-8><picture><img src=/images/blog/testing-spring-controllers/header.jpg alt="Testing Spring MVC Controllers"></picture><div class=taglist><ul class=list-inline><li><a href=/tags/java/>Java</a></li><li><a href=/tags/software-testing/>Software Testing</a></li></ul></div><h1>Testing Spring MVC Controllers</h1><div class=meta><ul class=list-inline><li><a class=text-primary href=/#about>Nadia Zablah Humbert-Labeaumaz</a></li><li>October 31, 2015</li><li>2 min read</li></ul></div><div id=email-modal class="modal hidden"><div class=modal-content><button id=email-modal-close class=modal-close>&#215;</button><h2>Get the PDF</h2><p>Enter your email to access this document.</p><form id=email-form><input type=email id=email-input class=form-control placeholder=you@example.com required><div class=form-check><input type=checkbox class=form-check-input id=consent-checkbox>
<label class=form-check-label for=consent-checkbox>I would like to receive updates about upcoming trainings and content on business for tech leaders.</label></div><button type=submit class="btn btn-main">Access PDF</button><p id=form-message></p></form></div></div><div class="post-content post-excerpt"><p>Since Spring 3.2 (January 2013), it has become possible to test Spring MVC controllers without an external framework.
This article demonstrates how to test Spring MVC controllers using only Spring&rsquo;s built-in testing capabilities.</p><p>To do so, a simple Spring Boot project will be used as support. You can find it on <a href=https://github.com/nphumbert/demo-test-spring-mvc>GitHub</a>. First, we will present the controller to test, and then we will explain how to test it.</p><h2 id=controller>Controller</h2><p>The controller to test is shown below. It allows performing a search in a fruit list.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Controller</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ApplicationController</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@RequestMapping</span>(value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/fruits&#34;</span>, method <span style=color:#f92672>=</span> RequestMethod.<span style=color:#a6e22e>GET</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getFruits</span>(<span style=color:#a6e22e>@RequestParam</span>(value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;search&#34;</span>, required <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>) String search, <span style=color:#66d9ef>final</span> Model model) {
</span></span><span style=display:flex><span>        model.<span style=color:#a6e22e>addAttribute</span>(<span style=color:#e6db74>&#34;fruitBowl&#34;</span>, search(search));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;fruits&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>search</span>(String search) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (StringUtils.<span style=color:#a6e22e>isEmpty</span>(search)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> fruitBowl();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> fruitBowl().<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>filter</span>(fruit <span style=color:#f92672>-&gt;</span> fruit.<span style=color:#a6e22e>startsWith</span>(search))
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>collect</span>(toList());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>fruitBowl</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> asList(<span style=color:#e6db74>&#34;banana&#34;</span>, <span style=color:#e6db74>&#34;orange&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=test>Test</h2><p>Annotate the test class as follows:</p><ul><li><code>@RunWith(SpringJUnit4ClassRunner.class)</code> to benefit from Spring features in JUnit tests.</li><li><code>@SpringApplicationConfiguration(classes = DemoTestSpringMvcApplication.class)</code> to specify the configuration class used during the test.</li><li><code>@WebAppConfiguration</code> to indicate that the Spring application context to load is a <code>WebApplicationContext</code>.</li></ul><p>The entry point to perform the tests is the class <code>MockMvc</code>. Below, we will explain its usage.</p><h3 id=set-up>Set up</h3><p>Set up the <code>MockMvc</code> class as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Before</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setUp</span>() {
</span></span><span style=display:flex><span>    ApplicationController controller <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ApplicationController(); <span style=color:#75715e>// 1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mockMvc</span> <span style=color:#f92672>=</span> MockMvcBuilders.<span style=color:#a6e22e>standaloneSetup</span>(controller).<span style=color:#a6e22e>build</span>(); <span style=color:#75715e>// 2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>First, instantiate the controller (<code>1</code>). Then, initialize the mock using the static method <code>MockMvcBuilders.standaloneSetup()</code> (<code>2</code>). At this point, the mock is ready to test the controller.</p><h3 id=perform>Perform</h3><p>The method <code>MockMvc.perform()</code> simulates HTTP requests to the controller. For instance, a GET request is made as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>mockMvc.<span style=color:#a6e22e>perform</span>(
</span></span><span style=display:flex><span>    get(<span style=color:#e6db74>&#34;/fruits&#34;</span>) <span style=color:#75715e>// 1</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>param</span>(<span style=color:#e6db74>&#34;search&#34;</span>, <span style=color:#e6db74>&#34;ban&#34;</span>) <span style=color:#75715e>// 2</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p>The class <code>MockMvcRequestBuilders</code> provides static methods like <code>get</code> or <code>post</code> to simulate HTTP requests on a particular endpoint of the controller (<code>1</code>). You can add HTTP parameters to the request fluently (<code>2</code>).</p><p><code>MockMvcRequestBuilders</code> also provides other static methods:</p><ul><li>HTTP verbs like <code>delete</code>, <code>put</code> or <code>patch</code>.</li><li><code>fileUpload</code> for uploading binary files.</li><li>Others (<a href=http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/request/MockMvcRequestBuilders.html>documentation</a>).</li></ul><h3 id=assert>Assert</h3><p>MockMvc allows adding assertions to the controller&rsquo;s response.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>mockMvc.<span style=color:#a6e22e>perform</span>(get(<span style=color:#e6db74>&#34;/fruits&#34;</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>param</span>(<span style=color:#e6db74>&#34;search&#34;</span>, <span style=color:#e6db74>&#34;ban&#34;</span>))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>andExpect</span>(status().<span style=color:#a6e22e>isOk</span>()) <span style=color:#75715e>// 1</span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>andExpect</span>(view().<span style=color:#a6e22e>name</span>(<span style=color:#e6db74>&#34;fruits&#34;</span>)) <span style=color:#75715e>// 2</span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>andExpect</span>(model().<span style=color:#a6e22e>attribute</span>(<span style=color:#e6db74>&#34;fruitBowl&#34;</span>, contains(<span style=color:#e6db74>&#34;banana&#34;</span>))); <span style=color:#75715e>// 3</span>
</span></span></code></pre></div><p>Assertions are done with the <code>andExpect()</code> method. And, the <code>MockMvcResultMatchers</code> class provides static methods to perform assertions on the HTTP status (<code>1</code>), the view asked by the controller (<code>2</code>) and the model completed by the controller (<code>3</code>).</p><h2 id=conclusion>Conclusion</h2><p>The Spring test framework is a powerful, complete and straightforward way to test Spring MVC controllers. Its fluent API makes it possible to write elegant yet precise tests.</p></div></div><aside class=col-lg-4></div></div></div></div></section><footer class="footer bg-gray"><div class=container><div class=row><div class=col-md-12><div class="footer-menu links"><ul><li><a href=/>Home</a></li><li><a href=/experience>Experience</a></li><li><a href=/research>Research</a></li><li><a href=/trainings>Trainings</a></li><li><a href=/essays>Essays</a></li></ul></div><div class="footer-menu links"><ul><li><a href=/topics/economics-finance/>Economics & Finance</a></li><li><a href=/topics/high-performing-teams/>High-Performing Teams</a></li><li><a href=/topics/organizational-change/>Organizational Change</a></li><li><a href=/topics/strategic-management/>Strategic Management</a></li><li><a href=/topics/technology-ai/>Technology & AI</a></li></ul></div><div class=footer-menu><ul><li><a href=https://www.linkedin.com/in/nadia-humbert-labeaumaz/ target=_blank><i class=ion-social-linkedin-outline></i></a></li><li><a href=https://github.com/nphumbert target=_blank><i class=ion-social-github-outline></i></a></li><li><a href=https://twitter.com/nphumbert target=_blank><i class=ion-social-twitter-outline></i></a></li></ul></div><p class=copyright>© 2015-2026 Nadia Zablah Humbert-Labeaumaz
<span style=display:none>(Nadia Zablah Humbert-Labeaumaz)</span></p></div></div></div></footer><script src=/plugins/jquery/jquery.min.js></script><script src=/plugins/bootstrap/js/bootstrap.min.js></script><script src=/plugins/slick/slick.min.js></script><script src=/plugins/magnific-popup/magnific-popup.min.js></script><script src=/plugins/shuffle/shuffle.min.js></script><script src=/plugins/google-map/gmap.js defer></script><script src=/js/script.min.js></script></body></html>