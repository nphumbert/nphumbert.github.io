<!doctype html><html lang=en-US><head><meta charset=utf-8><title>Go Back in Time with Git</title>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Entrepreneur, consultant, bio-sciences and software engineer."><meta name=author content="Nadia Humbert-Labeaumaz"><meta name=generator content="Hugo 0.131.0"><meta property="og:image" content="https://nphumbert.github.io/images/blog/back-in-time-git/header.jpg"><meta property="og:url" content="https://nphumbert.github.io/blog/2017/04/19/go-back-in-time-with-git/"><meta property="og:site_name" content="Nadia Humbert-Labeaumaz"><meta property="og:title" content="Go Back in Time with Git"><meta property="og:description" content="Recently, I conducted a workshop about how to go back in time with Git alongside Renaud. Here are the main points that we raised during this session."><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2017-04-19T20:22:15+01:00"><meta property="article:modified_time" content="2017-04-19T20:22:15+01:00"><meta property="og:image" content="https://nphumbert.github.io/images/slider.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nphumbert.github.io/images/slider.jpg"><meta name=twitter:title content="Go Back in Time with Git"><meta name=twitter:description content="Recently, I conducted a workshop about how to go back in time with Git alongside Renaud. Here are the main points that we raised during this session."><script async src="https://www.googletagmanager.com/gtag/js?id=G-FDXGPB3FE3"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FDXGPB3FE3")}</script><link rel=stylesheet href=/plugins/bootstrap/css/bootstrap.min.css media=screen><link rel=stylesheet href=/plugins/ionicons/css/ionicons.min.css><link rel=stylesheet href=/plugins/magnific-popup/magnific-popup.min.css><link rel=stylesheet href=/plugins/slick/slick.css><link rel=stylesheet href=/scss/style.min.css media=screen><link rel="shortcut icon" href=/images/favicon.png type=image/x-icon><link rel=icon href=/images/favicon.png type=image/x-icon><link rel=canonical href=https://nphumbert.github.io/blog/2017/04/19/go-back-in-time-with-git/></head><body><div class=preloader></div><header class=navigation><div class=container><div class=row><div class=col-md-12><nav class=navbar><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navigation>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button></div><div class="collapse navbar-collapse" id=navigation><ul class="nav navbar-nav"><li><a href=/>Home</a></li><li><a href=/experience>Experience</a></li><li><a href=/blog>Articles</a></li></ul></div></nav></div></div></div></header><section class="page-title bg-2" style=background-image:url(/images/blog/back-in-time-git/header.jpg)><div class=container><div class=row><div class=col-md-12><div class=block><h1>Go Back in Time with Git</h1><p></p></div></div></div></div></section><section class=page-wrapper><div class=container><div class=row><div class=col-md-8><div class="post post-single"><h2 class=post-title>Go Back in Time with Git</h2><div class=post-meta><ul><li><i class=ion-calendar></i> April 19, 2017</li><li><i class=ion-android-people></i>
Posted by
<a class=text-primary href=/author/nadia-humbert-labeaumaz>Nadia Humbert-Labeaumaz</a></li><li><i class=ion-pricetags></i></li></ul></div><div class=post-thumb><img class=img-responsive src=/images/blog/back-in-time-git/header.jpg alt="Go Back in Time with Git"></div><div class="post-content post-excerpt"><p>Recently, I conducted a workshop about how to go back in time with Git alongside <a href=https://twitter.com/rnowif>Renaud</a>. Here are the main points that we raised during this session.</p><h2 id=case-1-delete-the-last-commit>Case #1: Delete the Last Commit</h2><p>The initial Git tree used to illustrate this case is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* 7ec8248 N - <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> Hello, world!
</span></span><span style=display:flex><span>* 26af837 N - Hello, world
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>The goal here is to delete the last commit, so the resulting tree looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* 26af837 N - <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> Hello, world
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>The easiest way to achieve this purpose is to use the <code>git reset</code> command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git reset --hard 26af837
</span></span></code></pre></div><p>It sets the current branch to the specified commit. The <code>--hard</code> option will discard all changes that have been made after the specified commit.</p><h2 id=case-2-create-a-branch-from-a-previous-commit>Case #2: Create a Branch from a Previous Commit</h2><p>In this case, the initial Git tree is the same as before.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* 7ec8248 N - <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> Hello, world!
</span></span><span style=display:flex><span>* 26af837 N - Hello, world
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>We want to create a branch from the commit <code>26af837</code> to fix a bug, for instance. The resulting tree should be the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* ae77cf0 N - <span style=color:#f92672>(</span>HEAD -&gt; bug-fix<span style=color:#f92672>)</span> Fixed it!
</span></span><span style=display:flex><span>| * 7ec8248 N - <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span> Hello, world!
</span></span><span style=display:flex><span>|/  
</span></span><span style=display:flex><span>* 26af837 N - Hello, world
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>First, we need to position ourselves on the commit:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git checkout 26af837
</span></span></code></pre></div><p>Then, we are in the &lsquo;detached HEAD&rsquo; state, which means we are no longer on a branch, and further commits will not be kept. Consequently, we can create the branch and commit the bug fix:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git checkout -b bug-fix
</span></span><span style=display:flex><span>$ <span style=color:#75715e># Fix the bug ...</span>
</span></span><span style=display:flex><span>$ git commit -m <span style=color:#e6db74>&#34;Fixed it!&#34;</span>
</span></span></code></pre></div><h2 id=case-3-put-the-last-commit-on-a-new-branch>Case #3: Put the Last Commit on a New Branch</h2><p>Here, we made a commit on the <code>master</code> branch by mistake and we want to transfer it to another branch.</p><p>The Git tree should go from this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* 7ec8248 N - <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> Hello, world!
</span></span><span style=display:flex><span>* 26af837 N - Hello, world
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>to this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* 7ec8248 N - <span style=color:#f92672>(</span>HEAD -&gt; feature<span style=color:#f92672>)</span> Hello, world!
</span></span><span style=display:flex><span>* 26af837 N - <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span> Hello, world
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>To do so, we just have to create the <code>feature</code> branch from the last commit and reset <code>master</code> to the previous one.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git checkout -b feature
</span></span><span style=display:flex><span>$ git checkout master
</span></span><span style=display:flex><span>$ git reset --hard 26af837
</span></span><span style=display:flex><span>$ git checkout feature
</span></span></code></pre></div><h2 id=case-4-rewrite-history>Case #4: Rewrite History</h2><p>In this case, we want to completely remove a past commit from the Git tree.</p><p>The initial tree looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* b1b5f0a N - <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> Hello, world
</span></span><span style=display:flex><span>* b7d38ac N - Add key.txt
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>We want the resulting tree to show no sign of the commit <code>b7d38ac</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* efb44c9 N - <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> Hello, world
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>The <code>git rebase -i</code> command allows rewriting the history of a branch from a specific starting point. And, it will prompt the list of all the commits since this starting point. Then, you can perform different actions on these commits like reword a commit message, squash several commits into one, reorder and delete commits. After these modifications, lines will be executed from top to bottom. You can find more information about rewriting history <a href=https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History>here</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git rebase -i HEAD~2
</span></span><span style=display:flex><span>$ <span style=color:#75715e># Delete the line corresponding to the commit to remove.</span>
</span></span></code></pre></div><p>Since we wanted to go two commits back, we used the notation <code>HEAD~2</code> to specify the starting point. Note that we could also have used the specific hash of the commit (<code>c9b1299</code>).</p><h2 id=case-5-revert-a-commit>Case #5: Revert a Commit</h2><p>During this workshop, an attendee talked about the <code>git revert</code> command. Unlike the other commands that we saw in this article, the <code>git revert</code> command does not modify past commits. Instead, it creates a <strong>new</strong> commit that is the exact opposite of the reverted commit.</p><p>For instance, if we start from this Git tree:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* f999291 N - <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> Hello, world
</span></span><span style=display:flex><span>* a9f8fb3 N - Add key.txt
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>and revert the commit a9f8fb3, which contains only a new file, a new commit that only contains the removal of this file will be created.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git revert a9f8fb3
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* 55bc161 N - <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> Revert <span style=color:#e6db74>&#34;Add key.txt&#34;</span>
</span></span><span style=display:flex><span>* f999291 N - Hello, world
</span></span><span style=display:flex><span>* a9f8fb3 N - Add key.txt
</span></span><span style=display:flex><span>* c9b1299 N - Hello
</span></span></code></pre></div><p>This command could be used when several people work on the same branch to avoid a forced push on the remote repository. Moreover, it is possible to use it to keep an explicit trace of this action in the tree for a particular reason.</p><h2 id=last-resort-keep-calm-and-use-git-reflog>Last resort: Keep Calm and Use Git Reflog</h2><p>Renaud wrote an <a href=https://blog.crafties.fr/2017/04/11/git-reflog/>article</a> on the <code>git reflog</code> command to recover commits that appear to be lost. To illustrate what this command does here is its output when used in case #4:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git reflog
</span></span><span style=display:flex><span>efb44c9 HEAD@<span style=color:#f92672>{</span>0<span style=color:#f92672>}</span>: rebase -i <span style=color:#f92672>(</span>finish<span style=color:#f92672>)</span>: returning to refs/heads/master
</span></span><span style=display:flex><span>efb44c9 HEAD@<span style=color:#f92672>{</span>1<span style=color:#f92672>}</span>: rebase -i <span style=color:#f92672>(</span>pick<span style=color:#f92672>)</span>: Hello, world
</span></span><span style=display:flex><span>c9b1299 HEAD@<span style=color:#f92672>{</span>2<span style=color:#f92672>}</span>: rebase -i <span style=color:#f92672>(</span>start<span style=color:#f92672>)</span>: checkout HEAD~2
</span></span><span style=display:flex><span>26af837 HEAD@<span style=color:#f92672>{</span>3<span style=color:#f92672>}</span>: commit: Hello, world
</span></span><span style=display:flex><span>712d068 HEAD@<span style=color:#f92672>{</span>4<span style=color:#f92672>}</span>: commit: Add key.txt
</span></span><span style=display:flex><span>c9b1299 HEAD@<span style=color:#f92672>{</span>5<span style=color:#f92672>}</span>: commit <span style=color:#f92672>(</span>initial<span style=color:#f92672>)</span>: Hello
</span></span></code></pre></div><p>You can see that the deleted commit (<code>712d068</code>) still appears in the reflog.</p><h2 id=conclusion>Conclusion</h2><p>This article shows several ways to go back in time with Git. These commands could be used alone or combined to get you out of complicated situations or to rearrange your Git tree before a <code>git push</code>, for instance.</p></div><div class=post-comments></div></div></div><div class=col-md-4><aside class=sidebar><div class="widget widget-latest-post"><h4 class=widget-title>Latest Posts</h4><div class=media><a class=pull-left href=/blog/2021/04/28/effecting-long-lasting-changes/><img class=media-object src=/images/blog/effecting-long-lasting-changes/header.jpg alt="How to Effect Long-Lasting Organisational Changes"></a><div class=media-body><h4 class=media-heading><a href=/blog/2021/04/28/effecting-long-lasting-changes/>How to Effect Long-Lasting Organisational Changes</a></h4></div></div><div class=media><a class=pull-left href=/blog/2021/01/14/what-is-a-social-entrepreneur/><img class=media-object src=/images/blog/what-is-a-social-entrepreneur/header.jpg alt="What is a Social Entrepreneur?"></a><div class=media-body><h4 class=media-heading><a href=/blog/2021/01/14/what-is-a-social-entrepreneur/>What is a Social Entrepreneur?</a></h4></div></div><div class=media><a class=pull-left href=/blog/2020/07/05/debt-sme-nz/><img class=media-object src=/images/blog/debt-sme-nz/header.jpg alt="Debt and SMEs in New Zealand"></a><div class=media-body><h4 class=media-heading><a href=/blog/2020/07/05/debt-sme-nz/>Debt and SMEs in New Zealand</a></h4></div></div><div class=media><a class=pull-left href=/blog/2019/06/27/cloudy-relationship-france-diesel/><img class=media-object src=/images/blog/diesel/header.jpg alt="The Cloudy Relationship Between France and Diesel"></a><div class=media-body><h4 class=media-heading><a href=/blog/2019/06/27/cloudy-relationship-france-diesel/>The Cloudy Relationship Between France and Diesel</a></h4></div></div></div><div class="widget widget-category"><h4 class=widget-title>Categories</h4><ul class=widget-category-list><li><a href=/categories/business/>Business</a></li><li><a href=/categories/case-studies/>Case Studies</a></li><li><a href=/categories/software/>Software</a></li></ul></div><div class="widget widget-tag"><h4 class=widget-title>Tags</h4><ul class=widget-tag-list><li><a href=/tags/change-management/>Change Management</a></li><li><a href=/tags/economics/>Economics</a></li><li><a href=/tags/finance/>Finance</a></li><li><a href=/tags/java/>Java</a></li><li><a href=/tags/refactoring/>Refactoring</a></li><li><a href=/tags/social-entrepreneurship/>Social Entrepreneurship</a></li><li><a href=/tags/software-design/>Software Design</a></li><li><a href=/tags/software-testing/>Software Testing</a></li></ul></div></aside></div></div></div></section><footer class=footer><div class=container><div class=row><div class=col-md-12><div class=footer-menu><ul><li><a href=/>Home</a></li><li><a href=/experience>Experience</a></li><li><a href=/blog>Articles</a></li></ul></div><div class=footer-menu><ul><li><a href=https://www.linkedin.com/in/nadia-humbert-labeaumaz/ target=_blank><i class=ion-social-linkedin-outline></i></a></li><li><a href=https://github.com/nphumbert target=_blank><i class=ion-social-github-outline></i></a></li><li><a href=https://twitter.com/nphumbert target=_blank><i class=ion-social-twitter-outline></i></a></li></ul></div><p class=copyright></p></div></div></div></footer><script src=/plugins/jquery/jquery.min.js></script><script src=/plugins/bootstrap/js/bootstrap.min.js></script><script src=/plugins/slick/slick.min.js></script><script src=/plugins/magnific-popup/magnific-popup.min.js></script><script src=/plugins/shuffle/shuffle.min.js></script><script src=/plugins/google-map/gmap.js defer></script><script src=/js/script.min.js></script></body></html>